<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Platinum Royal - All-in-One</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        body { background: #000; color: white; text-align: center; font-family: 'Tajawal', sans-serif; margin: 0; overflow-x: hidden; }
        .section-title { margin: 20px; font-weight: bold; color: #ffca28; text-shadow: 0 0 10px rgba(255,202,40,0.3); }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ§Ù„Ø±ØµÙŠØ¯ */
        .header-box { background: linear-gradient(180deg, #1a1a1a 0%, #000 100%); padding: 30px 10px; border-bottom: 2px solid #ffca28; }
        #balDisp { font-size: 3rem; color: #ffca28; font-family: monospace; }

        /* ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ */
        .games-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 15px; }
        .game-card { background: #111; border: 1px solid #333; padding: 25px; border-radius: 20px; cursor: pointer; transition: 0.3s; position: relative; overflow: hidden; }
        .game-card:active { transform: scale(0.95); }
        .game-card i { font-size: 45px; display: block; margin-bottom: 10px; }
        .game-card b { color: #ffca28; }

        /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…Ø¯Ù…Ø¬Ø© (ØªØ¬Ù†Ø¨ 404) */
        #gameWindow { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000; flex-direction:column; z-index:9999; }
        .close-bar { background: #ffca28; color: #000; padding: 15px; cursor: pointer; font-weight: bold; }
        #gameContent { flex-grow: 1; display: flex; align-items: center; justify-content: center; background: #0a0a0a; }

        /* ÙƒÙˆØ¯ Ø§Ù„Ù…Ù†Ø¬Ù… Ø§Ù„Ù…Ø¯Ù…Ø¬ */
        .mine-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; width: 90%; max-width: 350px; }
        .cell { width: 100%; aspect-ratio: 1/1; background: #222; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 20px; cursor: pointer; }
        .cell.safe { background: #ffca28; color: #000; }
        .cell.bomb { background: #ff4444; }

        .sham-card { background: #0a0a0a; border: 1px solid #222; padding: 20px; margin: 20px; border-radius: 20px; }
        #qrcode { display: inline-block; background: white; padding: 10px; border-radius: 10px; margin: 15px 0; }
    </style>
</head>
<body>

    <div class="header-box">
        <div id="userNameDisp">ğŸ•¹ï¸ Ø§Ù„Ù„Ø§Ø¹Ø¨: Ø¬Ø§Ø±Ù Ø§Ù„ØªØ¹Ø±Ù...</div>
        <div>Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
        <div id="balDisp">0</div>
    </div>

    <div class="section-title">ğŸ® ØµØ§Ù„Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ (Ù…Ø¯Ù…Ø¬Ø©)</div>
    <div class="games-grid">
        <div class="game-card" onclick="openInternalGame('mines')">
            <i>ğŸ’£</i><b>Ø§Ù„Ù…Ù†Ø¬Ù… Ø§Ù„Ù…Ù„ÙƒÙŠ</b>
        </div>
        <div class="game-card" onclick="alert('Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ø¨Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©')">
            <i>ğŸš€</i><b>Ù…Ù„Ø§Ø­Ù‚Ø© Ø§Ù„Ø¨Ø±Ù‚</b>
        </div>
    </div>

    <div class="section-title">ğŸ’³ Ø´Ø­Ù† ÙˆØ³Ø­Ø¨</div>
    <div class="sham-card">
        <h3>Ø´Ø§Ù… ÙƒØ§Ø´ - Ø§Ù„ÙˆÙƒÙŠÙ„</h3>
        <div id="qrcode"></div>
        <div style="font-size:10px; color:#00ff44; font-family:monospace;">ID: Be066ca49abcf3d1ac79a65895aecb5e</div>
    </div>

    <div id="gameWindow">
        <div class="close-bar" onclick="closeGame()"> â¬… Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ù„Ø¹Ø¨Ø© </div>
        <div id="gameContent">
            </div>
    </div>

    <script>
        // 1. Firebase Config
        const firebaseConfig = { databaseURL: "https://user-project-6c3bb-default-rtdb.firebaseio.com/" };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let pId = localStorage.getItem('pId') || "PLT" + Math.floor(Math.random()*99999);
        let fullName = localStorage.getItem('fullName') || "Ù„Ø§Ø¹Ø¨ Ø¨Ù„Ø§ØªÙŠÙ†ÙŠÙˆÙ…";
        localStorage.setItem('pId', pId);

        // 2. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯ Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±
        function startPlatform() {
            document.getElementById('userNameDisp').innerText = "ğŸ•¹ï¸ Ø§Ù„Ù„Ø§Ø¹Ø¨: " + fullName;
            db.ref('players_logs/' + pId).on('value', (s) => {
                if(s.exists()) { 
                    let score = s.val().score;
                    document.getElementById('balDisp').innerText = Number(score).toLocaleString();
                    localStorage.setItem('userBalance', score);
                }
            });
        }

        // 3. ÙØªØ­ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø¯Ø§Ø®Ù„ Ù†ÙØ³ Ø§Ù„ØµÙØ­Ø© (Ù…Ø¯Ù…Ø¬Ø©)
        function openInternalGame(type) {
            const win = document.getElementById('gameWindow');
            const content = document.getElementById('gameContent');
            win.style.display = 'flex';
            
            if(type === 'mines') {
                content.innerHTML = `
                    <div style="text-align:center">
                        <h3 style="color:#ffca28">Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…Ù†Ø¬Ù… - Ø§Ù„Ø±ØµÙŠØ¯ Ù…ØªØµÙ„ âœ…</h3>
                        <div class="mine-grid" id="grid"></div>
                        <button onclick="initMines()" style="margin-top:20px; padding:10px 20px; background:#ffca28; border:none; border-radius:5px; font-weight:bold">Ø§Ø¨Ø¯Ø£ Ø±Ù‡Ø§Ù† Ø¬Ø¯ÙŠØ¯</button>
                    </div>
                `;
                initMines();
            }
        }

        // 4. Ù…Ù†Ø·Ù‚ Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…Ù†Ø¬Ù… (Ù…Ø«Ø§Ù„ Ø¨Ø³ÙŠØ· Ù…Ø¯Ù…Ø¬)
        function initMines() {
            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            for(let i=0; i<25; i++) {
                let cell = document.createElement('div');
                cell.className = 'cell';
                cell.onclick = function() { 
                    this.className = 'cell safe'; 
                    this.innerText = 'ğŸ’';
                    // Ù‡Ù†Ø§ Ù†Ø¶Ø¹ ÙƒÙˆØ¯ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø¨Ø­ ÙÙŠ Firebase
                };
                grid.appendChild(cell);
            }
        }

        function closeGame() {
            document.getElementById('gameWindow').style.display = 'none';
        }

        window.onload = function() {
            new QRCode(document.getElementById("qrcode"), { text: "Be066ca49abcf3d1ac79a65895aecb5e", width: 120, height: 120 });
            startPlatform();
        };
    </script>
</body>
</html>
