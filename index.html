<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Platinum Royal Platform</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        body { background: #111; color: white; text-align: center; font-family: sans-serif; }
        .section-title { margin: 20px; font-weight: bold; color: #ffca28; }
        
        /* ØªØµÙ…ÙŠÙ… Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ */
        .games-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 15px; }
        .game-card { background: #222; border: 2px solid #444; padding: 20px; border-radius: 15px; cursor: pointer; transition: 0.3s; }
        .game-card:hover { border-color: #ffca28; transform: scale(1.05); }
        .game-card i { font-size: 40px; display: block; margin-bottom: 10px; }

        .gift-container { display: flex; justify-content: center; gap: 10px; margin: 20px; }
        .gift-box { background: #333; padding: 10px; border-radius: 10px; cursor: pointer; width: 80px; }
        
        #gameWindow { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000; flex-direction:column; z-index:9999; }
        #gameIframe { width:100%; flex-grow:1; border:none; }
        .close-bar { background: #ffca28; color: #000; padding: 15px; cursor: pointer; font-weight: bold; }
        
        .sham-card { background: #1a1a1a; border: 1px solid #333; padding: 20px; margin: 20px; border-radius: 15px; }
        #qrcode { display: flex; justify-content: center; margin: 10px; }
    </style>
</head>
<body>

    <h2 id="userNameDisp">ğŸ•¹ï¸ Ø§Ù„Ù„Ø§Ø¹Ø¨: Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</h2>
    <h1 style="color: #ffca28;">ğŸ’° <span id="balDisp">0</span></h1>

    <div class="section-title">ğŸ® ØµØ§Ù„Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ù„ÙƒÙŠØ©</div>
    <div class="games-grid">
        <div class="game-card" onclick="openGame('mines_game.html')">
            <i>ğŸ’£</i>
            <span>Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…Ù†Ø¬Ù…</span>
        </div>
        <div class="game-card" onclick="openGame('crash_game.html')">
            <i>ğŸš€</i>
            <span>Ù…Ù„Ø§Ø­Ù‚Ø© Ø§Ù„Ø¨Ø±Ù‚</span>
        </div>
        <div class="game-card" onclick="openGame('boxes_game.html')">
            <i>ğŸ“¦</i>
            <span>ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ø­Ø¸</span>
        </div>
        <div class="game-card" onclick="openGame('wheel_game.html')">
            <i>ğŸ¡</i>
            <span>Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸</span>
        </div>
    </div>

    <div class="section-title">ğŸ ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ø¬ÙˆØ§Ø¦Ø² Ø§Ù„Ù…Ø´ØªØ¹Ù„Ø©</div>
    <div class="gift-container">
        <div class="gift-box" onclick="alert('Ø±Ù‡Ø§Ù†Ùƒ Ù…Ù†Ø®ÙØ¶ Ø¬Ø¯Ø§Ù‹')"><i>ğŸ“¦</i><br><small>Ø¨Ø±ÙˆÙ†Ø²ÙŠ</small></div>
        <div class="gift-box" onclick="alert('Ù…Ø®ØµØµ Ù„Ù€ VIP')"><i>ğŸ</i><br><small>Ø°Ù‡Ø¨ÙŠ</small></div>
        <div class="gift-box" onclick="alert('ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù†Ø®Ø¨Ø© Ù…Ø³ÙƒØ± Ø­Ø§Ù„ÙŠØ§Ù‹')"><i>ğŸ’</i><br><small>Ù…Ù„ÙƒÙŠ</small></div>
    </div>

    <div class="section-title">ğŸ’³ Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ÙÙˆØ±ÙŠ</div>
    <div class="sham-card">
        <h3>Ø´Ø§Ù… ÙƒØ§Ø´ - Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯</h3>
        <div id="qrcode"></div>
        <div style="font-size:11px; color:#00ff44; font-family:monospace;">WALLET ID: Be066ca49abcf3d1ac79a65895aecb5e</div>
    </div>

    <div id="gameWindow">
        <div class="close-bar" onclick="closeGame()"> â¬… Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…Ù†ØµØ© </div>
        <iframe id="gameIframe" src=""></iframe>
    </div>

    <script>
        const firebaseConfig = { databaseURL: "https://user-project-6c3bb-default-rtdb.firebaseio.com/" };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let pId = localStorage.getItem('pId') || "PLT" + Math.floor(Math.random()*99999);
        let fullName = localStorage.getItem('fullName');
        localStorage.setItem('pId', pId);

        window.onload = function() {
            if (document.getElementById("qrcode")) {
                new QRCode(document.getElementById("qrcode"), {
                    text: "Be066ca49abcf3d1ac79a65895aecb5e",
                    width: 140, height: 140
                });
            }
            if (!fullName) { 
                // Ù†Ø·Ù„Ø¨ Ø§Ù„Ø§Ø³Ù… Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
                alert("ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯ nameOverlay Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…");
            } else { 
                startPlatform(); 
            }
        };

        function startPlatform() {
            document.getElementById('userNameDisp').innerText = "ğŸ•¹ï¸ Ø§Ù„Ù„Ø§Ø¹Ø¨: " + fullName;
            db.ref('players_logs/' + pId).on('value', (s) => {
                if(s.exists()) { 
                    let score = s.val().score;
                    document.getElementById('balDisp').innerText = Number(score).toLocaleString(); 
                    localStorage.setItem('userBalance', score);
                }
            });
        }

        function openGame(url) {
            let currentScore = localStorage.getItem('userBalance') || 0;
            let connector = url.includes('?') ? '&' : '?';
            // Ù†Ø±Ø³Ù„ Ø§Ù„Ù€ pId ÙˆØ§Ù„Ø±ØµÙŠØ¯ Ø¨Ù‚Ù„Ø¨ Ø§Ù„Ø±Ø§Ø¨Ø· Ø¹Ø´Ø§Ù† Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ø§ ØªÙØªØ­ Ø¹Ù„Ù‰ ØµÙØ±
            let finalUrl = `${url}${connector}pId=${pId}&bal=${currentScore}`;
            
            document.getElementById('gameIframe').src = finalUrl;
            document.getElementById('gameWindow').style.display = 'flex';
        }

        function closeGame() {
            document.getElementById('gameWindow').style.display = 'none';
            document.getElementById('gameIframe').src = '';
            startPlatform();
        }
    </script>
</body>
</html>
