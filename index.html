<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLATINUM ROYAL</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap');
        body { background: #000; color: #fff; font-family: 'Cairo', sans-serif; margin: 0; text-align: center; }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ§Ù„Ø±ØµÙŠØ¯ */
        .header { padding: 20px; background: #0a0a0a; border-bottom: 1px solid #222; }
        .balance { font-size: 45px; color: #ffcc33; font-weight: 900; margin: 10px 0; }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª */
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 20px; }
        .game-card { background: #111; border: 1px solid #222; border-radius: 15px; padding: 25px; cursor: pointer; text-decoration: none; color: #fff; }
        .game-card i { font-size: 40px; display: block; margin-bottom: 10px; }

        /* Ù…Ø´ØºÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Iframe */
        #player { position: fixed; inset: 0; background: #000; z-index: 9999; display: none; flex-direction: column; }
        .close { padding: 15px; background: #111; color: #ffcc33; text-align: left; cursor: pointer; font-weight: bold; }
        iframe { flex: 1; border: none; width: 100%; height: 100%; }
    </style>
</head>
<body>

    <div class="header">
        <div style="font-size: 12px; color: #777;">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ù„ÙƒÙŠ</div>
        <div class="balance" id="b">0</div>
        <div id="n" style="color: #ffcc33;">----</div>
    </div>

    <div class="grid">
        <div class="game-card" onclick="run('./mines.html')"><i>â›ï¸</i><b>Ø§Ù„Ù…Ù†Ø¬Ù…</b></div>
        <div class="game-card" onclick="run('./wheel.html')"><i>ğŸ¡</i><b>Ø§Ù„Ø¹Ø¬Ù„Ø©</b></div>
        <div class="game-card" onclick="run('./plane.html')"><i>âœˆï¸</i><b>Ø§Ù„Ø·ÙŠØ§Ø±</b></div>
        <div class="game-card" onclick="run('./battle.html')"><i>âš”ï¸</i><b>Ø§Ù„Ù‚ØªØ§Ù„</b></div>
    </div>

    <div id="player">
        <div class="close" onclick="document.getElementById('player').style.display='none'; document.getElementById('ifrm').src='';"> â¬… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù„Ø¹Ø¨Ø© </div>
        <iframe id="ifrm" src=""></iframe>
    </div>

    <script>
        const firebaseConfig = { databaseURL: "https://user-project-6c3bb-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let pId = localStorage.getItem('pId') || "PLT" + Math.floor(Math.random()*99999);
        localStorage.setItem('pId', pId);

        // Ø¬Ù„Ø¨ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø±ØµÙŠØ¯
        db.ref('players_logs/' + pId).on('value', (s) => {
            if(s.exists()) {
                document.getElementById('b').innerText = s.val().score.toLocaleString();
                document.getElementById('n').innerText = s.val().name;
            } else {
                // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…Ø³Ø¬Ù„Ø§Ù‹ØŒ Ø§Ø·Ù„Ø¨ Ø§Ù„Ø§Ø³Ù… (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·)
                let name = prompt("Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ:");
                if(name) db.ref('players_logs/' + pId).set({name: name, score: 0});
            }
        });

        function run(url) {
            document.getElementById('ifrm').src = url;
            document.getElementById('player').style.display = 'flex';
        }
    </script>
</body>
</html>
