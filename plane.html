<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø±Ø§Ø¡ ğŸš€</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@900&display=swap');
        body { background: #000; color: #fff; font-family: 'Cairo', sans-serif; text-align: center; margin: 0; overflow: hidden; }
        
        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨ */
        .game-area { 
            height: 60vh; 
            position: relative; 
            background: #050505; 
            overflow: hidden; 
            border-bottom: 3px solid #d4af37; 
        }

        /* Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø¸Ù‡ÙˆØ± Ø§Ù„Ø·Ø§Ø¦Ø±Ø© Ø¨Ù‚ÙˆØ© */
        #plane { 
            position: absolute; 
            bottom: 20%; 
            left: 10%; 
            width: 120px; /* Ø­Ø¬Ù… ÙˆØ§Ø¶Ø­ */
            height: auto;
            z-index: 999; /* Ù„Ø¬Ø¹Ù„Ù‡Ø§ ÙÙˆÙ‚ ÙƒÙ„ Ø´ÙŠØ¡ */
            display: block !important; /* Ø¥Ø¬Ø¨Ø§Ø± Ø§Ù„Ø¸Ù‡ÙˆØ± */
            transition: transform 0.1s linear;
        }

        .multiplier { font-size: 80px; padding-top: 40px; color: #d4af37; font-weight: 900; }
        .controls { padding: 20px; background: #0a0a0a; height: 40vh; }
        .btn { background: #d4af37; color: #000; padding: 20px; border-radius: 15px; font-size: 24px; font-weight: bold; border: none; width: 90%; cursor: pointer; }
        .btn-cashout { background: #27ae60; color: #fff; }
    </style>
</head>
<body>

    <div class="game-area">
        <div id="multi" class="multiplier">1.00x</div>
        
        <img id="plane" src="https://files.catbox.moe/5m9k90.png" onerror="this.src='https://cdn-icons-png.flaticon.com/512/3122/3122340.png'">
        
        <div id="explosion" style="display:none; font-size: 50px; position: absolute; left: 20%; bottom: 30%;">ğŸ’¥</div>
    </div>

    <div class="controls">
        <div style="margin-bottom:10px;">Ø±ØµÙŠØ¯Ùƒ: <span id="userBalance" style="color:#d4af37">0</span></div>
        <button class="btn" id="mainBtn" onclick="toggleGame()">Ø¥Ù‚Ù„Ø§Ø¹ ğŸ›«</button>
    </div>

    <script>
        const firebaseConfig = { databaseURL: "https://user-project-6c3bb-default-rtdb.firebaseio.com/" };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let pName = localStorage.getItem('pName') || "Ù„Ø§Ø¹Ø¨";
        let score = 0, multi = 1.0, isFlying = false, timer;

        db.ref('players_logs/' + pName).on('value', s => {
            score = s.val() ? s.val().score : 0;
            document.getElementById('userBalance').innerText = score;
        });

        function toggleGame() {
            if (!isFlying) {
                if (score < 100) return alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±ØµÙŠØ¯!");
                db.ref('players_logs/' + pName).update({ score: score - 100 });
                startFlight();
            } else { cashOut(); }
        }

        function startFlight() {
            isFlying = true; multi = 1.0;
            let crashPoint = (Math.random() * 3 + 1.2).toFixed(2);
            document.getElementById('mainBtn').innerText = "Ø³Ø­Ø¨ ğŸ’°";
            document.getElementById('mainBtn').classList.add('btn-cashout');
            
            timer = setInterval(() => {
                multi += 0.02;
                document.getElementById('multi').innerText = multi.toFixed(2) + "x";
                
                // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø·Ø§Ø¦Ø±Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰ ÙˆØ§Ù„ÙŠÙ…ÙŠÙ†
                let moveX = (multi - 1) * 150;
                let moveY = (multi - 1) * 100;
                document.getElementById('plane').style.transform = `translate(${moveX}px, -${moveY}px)`;
                
                if (multi >= crashPoint) {
                    clearInterval(timer);
                    isFlying = false;
                    document.getElementById('plane').style.display = "none";
                    document.getElementById('explosion').style.display = "block";
                    setTimeout(() => location.reload(), 2000);
                }
            }, 100);
        }

        function cashOut() {
            clearInterval(timer);
            isFlying = false;
            let win = Math.floor(100 * multi);
            db.ref('players_logs/' + pName).update({ score: score + win });
            alert("Ø±Ø¨Ø­Øª " + win);
            location.reload();
        }
    </script>
</body>
</html>
