<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ Ø§Ù„Ù…ÙˆØ­Ø¯Ø© ğŸ¡</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; text-align: center; }
        .wheel-container { margin-top: 50px; }
        #balanceDisplay { color: #d4af37; font-size: 24px; font-weight: bold; }
        .btn-spin { background: #d4af37; padding: 15px 40px; border-radius: 30px; border: none; font-size: 20px; cursor: pointer; margin-top: 20px; }
    </style>
</head>
<body>
    <a href="index.html" style="color:#fff; position:absolute; top:10px; right:10px;">ğŸ”™ Ø®Ø±ÙˆØ¬</a>
    <h1>Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ ğŸ¡</h1>
    <div id="balanceDisplay">Ø±ØµÙŠØ¯Ùƒ: <span id="userBalance">...</span></div>
    
    <div class="wheel-container">
        <button class="btn-spin" onclick="spinNow()">Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© (Ø±Ù‡Ø§Ù† 100)</button>
    </div>

    <script>
        const firebaseConfig = { databaseURL: "https://user-project-6c3bb-default-rtdb.firebaseio.com/" };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        let pName = localStorage.getItem('pName');
        let score = 0;

        db.ref('players_logs/' + pName).on('value', s => {
            if(s.exists()){ score = s.val().score; document.getElementById('userBalance').innerText = score; }
        });

        function spinNow() {
            if(score < 100) return alert("Ø±ØµÙŠØ¯Ùƒ Ù„Ø§ ÙŠÙƒÙÙŠ!");
            // Ù…Ù†Ø·Ù‚ Ø§Ù„Ø±Ø¨Ø­ ÙˆØ§Ù„Ø®Ø³Ø§Ø±Ø© Ù‡Ù†Ø§
            let win = Math.random() > 0.5 ? 200 : 0;
            db.ref('players_logs/'+pName).update({score: score - 100 + win});
            alert(win > 0 ? "Ù…Ø¨Ø±ÙˆÙƒ Ø±Ø¨Ø­Øª 200" : "Ù„Ù„Ø£Ø³Ù Ù„Ù… ØªØ±Ø¨Ø­");
        }
    </script>
</body>
</html>
